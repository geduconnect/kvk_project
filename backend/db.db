-- Ensure orders table references customers correctly
CREATE TABLE IF NOT EXISTS customers (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    customerName VARCHAR(255) NOT NULL,
    address VARCHAR(255),
    city VARCHAR(100),
    state VARCHAR(100),
    pincode VARCHAR(20),
    mobile VARCHAR(20),
    email VARCHAR(255),
    password VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Set the next AUTO_INCREMENT value to start from 2025000000
ALTER TABLE customers AUTO_INCREMENT = 2025000000;

-- Orders table
CREATE TABLE IF NOT EXISTS orders (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    customerId BIGINT NOT NULL,
    date DATE NOT NULL,
    totalCost DECIMAL(10,2) NOT NULL,
    status ENUM('Pending','Processing','Completed','Cancelled') NOT NULL DEFAULT 'Pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (customerId) REFERENCES customers(id) ON DELETE CASCADE
);

-- Order items table
CREATE TABLE IF NOT EXISTS order_items (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    orderId BIGINT NOT NULL,
    description VARCHAR(255) NOT NULL,
    amount DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (orderId) REFERENCES orders(id) ON DELETE CASCADE
);
CREATE TABLE vendor_products (
  id INT AUTO_INCREMENT PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  brand VARCHAR(255),
  description TEXT,
  category VARCHAR(100),
  oldPrice DECIMAL(10,2),
  price DECIMAL(10,2),
  stock INT DEFAULT 0,
  status ENUM('draft','active','inactive','published') DEFAULT 'draft',
  images JSON,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);